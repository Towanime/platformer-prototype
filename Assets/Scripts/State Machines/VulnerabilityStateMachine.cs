using System.Collections;
using System.Collections.Generic;
using UnityEngine;
using MonsterLove.StateMachine;

public class VulnerabilityStateMachine : MonoBehaviour {

    public PlayerInput playerInput;
    public PlayerHealth playerHealth;
    private StateMachine<VulnerabilityStates> stateMachine;

    void Awake()
    {
        if (stateMachine == null)
        {
            InitStateMachine();
        }
    }

    void Invulnerable_Enter()
    {
        playerHealth.BeginInvulnerable();
    }

    void Invulnerable_Update()
    {
        bool finished = playerHealth.UpdateInvulnerable();
        if (finished)
        {
            stateMachine.ChangeState(VulnerabilityStates.Vulnerable);
        }
    }

    public StateMachine<VulnerabilityStates> StateMachine
    {
        get {
            if (stateMachine == null)
            {
                InitStateMachine();
            }
            return stateMachine;
        }
    }

    void InitStateMachine()
    {
        stateMachine = StateMachine<VulnerabilityStates>.Initialize(this, VulnerabilityStates.Vulnerable);
    }
}
